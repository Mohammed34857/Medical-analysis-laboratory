<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="CSS/dashbord.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <title>Dashboard</title>
</head>

<body>
    <div class="menu">
        <ul class="menu-ul">
            <li class="profile">
                <div class="img-box">
                    <img src="photo_2023-04-25_21-34-01.jpg" alt="profile">

                </div>
                <h2>mohammad</h2>
            </li>
            <li>
                <a class="active" href="#">
                    <i class="fas fa-home"></i>
                    <p>dashborde</p>
                </a>
            </li>
            <li>
                <a href="#labora" >
                  <button class="btn"  onclick=" toggle_show()" > <i class="fas fa-user-group" ></i></button>
                    <p>laboratory</p>
            
                </a>
            </li>
        
            <li>
                <a href="#materia">
                    <i class="fas fa-table"></i>
                    <p>Materials</p>
                </a>
            </li>
          

            <li>
                <a href="#">
                    <button class="btn"  id="login_bt" onclick="login_but()"><i class="fas fa-cog"></i></button>
                    <p>settings</p>
                </a>
            </li>
            <li class="log-out">
                <a href="laboratory.html">
                    <i class="fas fa-sign-out"></i>
                    <p>log-out</p>
                </a>
            </li>
        </ul>

    </div>

    <div class="content">
        <div id="dash" class="title-info">
            <p>dashborde</p>
            <i class="fas fa-chart-bar"></i>


        </div>

        <div class="data-info">
            <div class="box">
                <i class="fas fa-user"></i>
                <div class="data">
                    <p>laboratory</p>
                    <span>100</span>
                </div>

            </div>
          
            <div class="box">
                <i class="fas fa-table"></i>
                <div class="data">
                    <p>Materials</p>
                    <span>100</span>
                </div>

            </div>
            <div class="box">
                <i class="fas fa-dollar"></i>
                <div class="data">
                    <p>revenue</p>
                    <span>$1225</span>
                </div>

            </div>
        </div>

          <div id="labora" class="title-info">
            <p>Laboratory</p>
            <i class="fas fa-table"></i>
        </div>

         <table id="laboratoryTable">
            <thead>
                <tr>
                    <th>name_laboratory</th>
                    <th>name-manager</th>
                    <th>phone</th>
                    <th>Title</th>
                    <th>password</th>
                </tr>
            </thead>
         </table>
    
       <table>
        <thead>
         <tr>
             <th>name_laboratory</th>
             <th>name-manager</th>
             <th>phone</th>
             <th>Title</th>
             <th>password</th>
             <th>edit</th>

         </tr>
        </thead> 
        <tbody>
            <tr>
                <td><input type="text" id="name_laboratory1" class="name_laboratory" ></td>
                <td><input type="text" id="name_manager1" class="name_manager" ></td>
                <td><input type="text" id="phone1" class="phone" ></td>
                <td><input type="text" id="Title1" class="Title" ></td>
                <td><input type="password" id="password1" class="password" > </td>
                <td><i class="fas fa-pen"></i>
                      <button id="add1" class="add">add</button></td>
            </tr>
            <tr>
              <td><input type="text" id="name_laboratory2" class="name_laboratory" ></td>
              <td><input type="text" id="name_manager2" class="name_manager" ></td>
              <td><input type="text" id="phone2" class="phone" ></td>
              <td><input type="text" id="Title2" class="Title" ></td>
              <td><input type="password" id="password2" class="password" > </td>
              <td>
                    <i class="fas fa-pen"></i>
                    <button id="edit1" class="edit">edit</button></td>
          </tr>
          <tr>
              <td><input type="text" id="name_laboratory3" class="name_laboratory" ></td>
              <td><input type="text" id="name_manager3" class="name_manager" ></td>
              <td><input type="text" id="phone3" class="phone" ></td>
              <td><input type="text" id="Title3" class="Title" ></td>
              <td><input type="password" id="password3" class="password" > </td>
              <td>
                    <i class="fas fa-trash"></i>
                    <button id="delete1" class="delete">delete</button></td>
          </tr>
        </tbody>
     </table>

        <div id="materia" class="title-info">
            <p>Materials</p>
            <i class="fas fa-table"></i>
        </div>

        <table id="materialsTable">

           <thead >
            <tr>
                <th>product</th>
                <th>Production_Date</th>
                <th>Production_Date</th>
                <th>price</th>
                <th>count</th>
            </tr>
        </thead> 
        </table>

        <table >

            <thead >
             <tr>
                 <th>product</th>
                 <th>Production_Date</th>
                 <th>Production_Date</th>
                 <th>price</th>
                 <th>count</th>
                 <th>edit</th>
 
             </tr>
         </thead> 
         <tbody>
          <tr>
              <td><input type="text" id="product1" class="product" ></td>
              <td><input type="text" id="Production_Date1" class="Production_Date" ></td>
              <td><input type="text" id="Expiry_date1" class="Expiry_date" ></td>
              <td><input type="text" id="price1" class="price" ></td>
              <td><input type="text" id="Quantity1" class="Quantity" > </td>
              <td><i class="fas fa-pen"></i>
                    <button id="add" class="add">add</button>
          </tr>
          <tr>
            <td><input type="text" id="product2" class="product" ></td>
            <td><input type="text" id="Production_Date2" class="Production_Date" ></td>
            <td><input type="text" id="Expiry_date2" class="Expiry_date" ></td>
            <td><input type="text" id="price2" class="price" ></td>
            <td><input type="text" id="Quantity2" class="Quantity" > </td>
            <td>
                  <i class="fas fa-pen"></i>
                  <button id="edit" class="edit">edit</button>
        </tr>
        <tr>
            <td><input type="text" id="product3" class="product" ></td>
            <td><input type="text" id="Production_Date3" class="Production_Date" ></td>
            <td><input type="text" id="Expiry_date3" class="Expiry_date" ></td>
            <td><input type="text" id="price3" class="price" ></td>
            <td><input type="text" id="Quantity3" class="Quantity" > </td>
            <td>
                  <i class="fas fa-trash"></i>
                  <button id="delete" class="delete">delete</button></td>
        </tr>
          </tbody>
         </table>


     <div id="loginWindow" class="login">            
        <div class="login_form">
            <button id="close_bt"><i class="fa-solid fa-close" style="color: #00ccff;"></i></button>
        <h2 id="loginText">تعديل معلومات الحساب </h2>
        <form action method="post">
        <div class="input_group"><i class="fa-solid fa-user" style="color: #00ccff;"></i>
            <input 
            type="text"
            placeholder="الاسم القديم"
            class="input_text"
            autocomplete="off"
            id="username"
            >
        
        </div>
        <div class="input_group"><i class="fa-solid fa-user" style="color: #00ccff;"></i>
            <input 
            type="text"
            placeholder="الاسم الجديد"
            class="input_text"
            autocomplete="off"
            id="username"
            >
            </div>
        <div class="input_group"><i class="fa-solid fa-unlock" style="color: #00ccff;"></i>
            <input 
            type="password"
            placeholder="  كلمة المرور القديمة  "
            class="input_text"
            autocomplete="off"
            id="password"
            >
        </div>
        <div class="input_group"><i class="fa-solid fa-unlock" style="color: #00ccff;"></i>
            <input 
            type="password"
            placeholder="كلمة المرور الجديدة  "
            class="input_text"
            autocomplete="off"
            id="password"
            >
        </div>
        <button class="button_group" id="login_butt" type="button" onclick="dash()">تعديل</button>
     
       </form>
    </div>

              </div>





              
    <script>
        
         let login_but = function () {
        var loginButton = document.getElementById("login_bt");
        var loginWindow = document.getElementById("loginWindow");
        var loginWindowClose = document.getElementById("close_bt");
           loginButton.addEventListener("click", function() {
           loginWindow.style.visibility = "visible"; 
          });
        loginWindowClose.addEventListener("click", function() {
        loginWindow.style.visibility = "hidden"; 
        });
    }
    

    window.onload = function() {

        

  var table1 = document.getElementById('materialsTable');

     fetch('https://testbyad.adaptable.app/material') 
    .then(response => response.json())
    .then(data => {
      data.forEach(material => {
        var row = table1.insertRow(-1);

        var productCell = row.insertCell(0);
        productCell.innerHTML = `<td> <span class="product"> ${material.name_Material}</span></td>`;

        var Production_DateCell = row.insertCell(1);
        Production_DateCell.innerHTML = `<td> <span class="Production_Date"> ${material.Production_Date}</span></td>`;

        var Expiry_dateCell = row.insertCell(2);
        Expiry_dateCell.innerHTML = `<td> <span class="Expiry_date"> ${material.Expiry_date}</span></td>`;

        var priceCell = row.insertCell(3);
        priceCell.innerHTML = `<td> <span class="price"> ${material.price}</span></td>`;

        var Quantitycall = row.insertCell(4);
        Quantitycall.innerHTML = `<td> <span class="count"> ${material.Quantity}</span></td>`;

      });
    })

     var table2 = document.getElementById('laboratoryTable');

     fetch('https://testbyad.adaptable.app/laboratory') 
    .then(response => response.json())
    .then(data => {
      data.forEach(laboratory => {
        var row = table2.insertRow(-1);

        var name_laboratoryCell = row.insertCell(0);
        name_laboratoryCell.innerHTML = `<td> <span class="namelaboratory"> ${laboratory.name_laboratory}</span></td>`;

        var name_managerCell = row.insertCell(1);
        name_managerCell.innerHTML = `<td> <span class="namemanager"> ${laboratory.name_manager}</span></td>`;

        var phoneCell = row.insertCell(2);
        phoneCell.innerHTML = `<td> <span class="phon"> ${laboratory.number_phon}</span></td>`;

        var TitleCell = row.insertCell(3);
        TitleCell.innerHTML = `<td> <span class="Tit"> ${laboratory.address}</span></td>`;

        var passwordcall = row.insertCell(4);
        passwordcall.innerHTML = `<td> <span class="pass"> ${laboratory.password}</span></td>`;

      });
    })

    }
                 let product1 = document.getElementById("product1").value;
                 fetch('https://testbyad.adaptable.app/material') 
                .then(response => response.json())
                .then(data => {
                var id_product1= null;
               for (var i = 0; i < data.length; i++) {
                 if (data[i].name_Material=== product1 ) {
                    id_product1= data[i]._id;
                    break;
                }
               }
             })
         document.getElementById("add").addEventListener("click", function (event) {
                event.preventDefault();
                const Production_Date1 = document.getElementById("Production_Date1").value;
                const Expiry_date1 = document.getElementById("Expiry_date1").value;
                const price1 = document.getElementById("price1").value;
                const Quantity1 = document.getElementById("Quantity1").value;
                fetch(`https://testbyad.adaptable.app/material/${id_product1}`, {
                    method: 'POST',
                    body: JSON.stringify({
                        name_Material: product1,
                        Production_Date: Expiry_date1,
                        Expiry_date: Expiry_date1,
                        Quantity: price1,
                        price: Quantity1
                    }),
                    headers: {
                        'Content-type': 'application/json; charset=UTF-8'
                    }
                })
                    .then((response) => response.json())
                    .then((json) => console.log(json));
                setTimeout(() => {
                    window.location.reload();
                }, 2000);
            });
            
            let product2 = document.getElementById("product2").value;
            fetch('https://testbyad.adaptable.app/material') 
                .then(response => response.json())
                .then(data => {
                var id_product2= null;
               for (var i = 0; i < data.length; i++) {
                 if (data[i].name_Material=== product2 ) {
                    id_product2= data[i]._id;
                    break;
                }
               }
             })
            document.getElementById("delete").addEventListener("click", function (event) {
                event.preventDefault();
                fetch(`https://testbyad.adaptable.app/material/${id_product2}`, {
                    method: 'DELETeE',
                    body: JSON.stringify({
                        
                    }),
                    headers: {
                        'Content-type': 'application/json; charset=UTF-8'
                    }
                })
                    .then((response) => response.json())
                    .then((json) => console.log(json));
                   setTimeout(() => {
                    window.location.reload();
                   }, 2000);
            });
             let product3 = document.getElementById("product2").value;
                 fetch('https://testbyad.adaptable.app/material') 
                .then(response => response.json())
                .then(data => {
                var id_product1= null;
               for (var i = 0; i < data.length; i++) {
                 if (data[i].name_Material=== product3 ) {
                    id_product3= data[i]._id;
                    break;
                }
               }
             })
            document.getElementById("edit").addEventListener("click", function (event) {
                event.preventDefault();
                const Production_Date3 = document.getElementById("Production_Date3").value;
                const Expiry_date3 = document.getElementById("Expiry_date3").value;
                const price3 = document.getElementById("price3").value;
                const Quantity3 = document.getElementById("Quantity3").value;
                fetch(`https://testbyad.adaptable.app/material/${id_product3}`, {
                    method: 'PATCH',
                    body: JSON.stringify({
                        name_Material: product3,
                        Production_Date: Expiry_date3,
                        Expiry_date: Expiry_date3,
                        Quantity: price3,
                        price: Quantity3
                    }),
                    headers: {
                        'Content-type': 'application/json; charset=UTF-8'
                    }
                })
                    .then((response) => response.json())
                    .then((json) => console.log(json));
                setTimeout(() => {
                    window.location.reload();
                }, 2000);
            });


             let name_laboratory1 = document.getElementById("name_laboratory1").value;
                 fetch('https://testbyad.adaptable.app/material') 
                .then(response => response.json())
                .then(data => {
                var id_name_laboratory1= null;
               for (var i = 0; i < data.length; i++) {
                 if (data[i].name_laboratory === name_laboratory1 ) {
                    id_name_laboratory1= data[i]._id;
                    break;
                }
               }
             })
            document.getElementById("add1").addEventListener("click", function (event) {
                event.preventDefault();
                const name_manager1= document.getElementById("name_manager1").value;
                const phone1 = document.getElementById("phone").value;
                const Title1 = document.getElementById("Title1").value;
                const password1 = document.getElementById("password1").value;
                fetch(`https://testbyad.adaptable.app/material/${id_name_laboratory1}`, {
                    method: 'POST',
                    body: JSON.stringify({
                        name_laboratory: name_laboratory1,
                        name_manager: name_manager1,
                        number_phon: phone1,
                        address: Title1,
                        password: password1
                    }),
                    headers: {
                        'Content-type': 'application/json; charset=UTF-8'
                    }
                })
                    .then((response) => response.json())
                    .then((json) => console.log(json));
                setTimeout(() => {
                    window.location.reload();
                }, 2000);
            });
            
            let name_laboratory2 = document.getElementById("name_laboratory2").value;
            fetch('https://testbyad.adaptable.app/material') 
                .then(response => response.json())
                .then(data => {
                var id_name_laboratory2= null;
               for (var i = 0; i < data.length; i++) {
                 if (data[i].name_laboratory=== name_laboratory2 ) {
                    id_name_laboratory2= data[i]._id;
                    break;
                }
               }
             })
            document.getElementById("delete1").addEventListener("click", function (event) {
                event.preventDefault();
                fetch(`https://testbyad.adaptable.app/material/${id_name_laboratory2}`, {
                    method: 'DELETeE',
                    body: JSON.stringify({
                        
                    }),
                    headers: {
                        'Content-type': 'application/json; charset=UTF-8'
                    }
                })
                    .then((response) => response.json())
                    .then((json) => console.log(json));
                setTimeout(() => {
                    window.location.reload();
                }, 2000);
            });
           
            let name_laboratory3 = document.getElementById("name_laboratory2").value;
                 fetch('https://testbyad.adaptable.app/material') 
                .then(response => response.json())
                .then(data => {
                var id_name_laboratory1= null;
               for (var i = 0; i < data.length; i++) {
                 if (data[i].name_laboratory=== name_laboratory3 ) {
                    id_name_laboratory3= data[i]._id;
                    break;
                }
               }
             })
            document.getElementById("edit1").addEventListener("click", function (event) {
                event.preventDefault();
                const name_manager3= document.getElementById("name_manager3").value;
                const phone3 = document.getElementById("phone3").value;
                const Title3 = document.getElementById("Title3").value;
                const password3 = document.getElementById("password3").value;
                fetch(`https://testbyad.adaptable.app/material/${id_name_laboratory3}`, {
                    method: 'PATCH',
                    body: JSON.stringify({
                        name_laboratory: name_laboratory3,
                        name_manager: name_manager3,
                        number_phon: phone3,
                        address: Title3,
                        password: password3
                    }),
                    headers: {
                        'Content-type': 'application/json; charset=UTF-8'
                    }
                })
                    .then((response) => response.json())
                    .then((json) => console.log(json));
                setTimeout(() => {
                    window.location.reload();
                }, 2000);
            });


    </script>

</body>

</html>